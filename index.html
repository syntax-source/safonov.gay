<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>safonov.gay</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;800&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <style>
        :root {
            --pride-red: #ff0018;
            --pride-orange: #ffa52c;
            --pride-yellow: #ffff41;
            --pride-green: #008018;
            --pride-blue: #0000f9;
            --pride-purple: #86007d;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            overflow: hidden;
            font-family: 'Outfit', sans-serif;
        }

        body {
            position: fixed;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            padding-top: max(1rem, env(safe-area-inset-top));
            padding-bottom: max(1rem, env(safe-area-inset-bottom));
            gap: clamp(0.5rem, 1.5vh, 1rem);
        }

        /* Canvas background */
        #bgCanvas {
            position: fixed;
            inset: 0;
            z-index: -2;
        }

        /* Glass overlay */
        .glass-overlay {
            position: fixed;
            inset: 0;
            z-index: -1;
            background: rgba(0, 0, 0, 0.25);
            backdrop-filter: blur(100px);
            -webkit-backdrop-filter: blur(100px);
        }

        /* Title */
        .title-wrapper {
            text-align: center;
            flex-shrink: 0;
        }

        h1 {
            font-size: clamp(1.75rem, 6vw, 4.5rem);
            font-weight: 800;
            letter-spacing: -0.03em;
            background: linear-gradient(
                90deg,
                var(--pride-red),
                var(--pride-orange),
                var(--pride-yellow),
                var(--pride-green),
                var(--pride-blue),
                var(--pride-purple),
                var(--pride-red)
            );
            background-size: 200% auto;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: textShine 3s linear infinite;
            filter: drop-shadow(0 0 30px rgba(255, 255, 255, 0.3));
        }

        @keyframes textShine {
            to { background-position: 200% center; }
        }

        .flags {
            display: flex;
            justify-content: center;
            gap: clamp(0.4rem, 1vw, 0.75rem);
            margin-top: clamp(0.4rem, 1vh, 0.75rem);
            font-size: clamp(1.25rem, 3vw, 2.5rem);
        }

        .flag {
            display: inline-block;
        }

        .flag.music-toggle {
            cursor: pointer;
            transition: transform 0.2s ease, filter 0.2s ease;
            user-select: none;
        }

        .flag.music-toggle:hover {
            transform: scale(1.2);
            filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.8));
        }

        .flag.music-toggle:active {
            transform: scale(0.95);
        }

        .flag.music-toggle.paused {
            filter: grayscale(0.5) opacity(0.6);
        }

        /* Video container */
        .video-wrapper {
            width: 100%;
            max-width: min(90vw, 1400px);
            max-height: calc(100dvh - clamp(10rem, 22vh, 14rem));
            display: flex;
            align-items: center;
            justify-content: center;
            flex: 1;
            min-height: 0;
        }

        .video-container {
            position: relative;
            width: 100%;
            height: 100%;
            max-height: 100%;
            border-radius: clamp(0.75rem, 2vw, 1.5rem);
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .video-container::before {
            content: '';
            position: absolute;
            inset: -3px;
            border-radius: inherit;
            padding: 3px;
            background: linear-gradient(
                135deg,
                var(--pride-red),
                var(--pride-orange),
                var(--pride-yellow),
                var(--pride-green),
                var(--pride-blue),
                var(--pride-purple)
            );
            background-size: 300% 300%;
            animation: borderMove 4s ease infinite;
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            z-index: 2;
            pointer-events: none;
        }

        @keyframes borderMove {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        video {
            width: 100%;
            height: 100%;
            max-height: calc(100dvh - clamp(10rem, 22vh, 14rem));
            object-fit: contain;
            background: rgba(0, 0, 0, 0.9);
            border-radius: inherit;
        }

        /* Footer */
        footer {
            flex-shrink: 0;
            text-align: center;
            padding: clamp(0.5rem, 1.5vh, 1rem);
            color: rgba(255, 255, 255, 0.7);
            font-size: clamp(0.7rem, 2vw, 0.9rem);
            line-height: 1.5;
            max-width: 600px;
        }

        footer a {
            color: var(--pride-yellow);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
        }

        footer a::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, var(--pride-red), var(--pride-purple));
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        footer a:hover {
            color: #fff;
            text-shadow: 0 0 15px var(--pride-yellow);
        }

        footer a:hover::after {
            transform: scaleX(1);
        }

        /* Floating emojis */
        .emoji-float {
            position: fixed;
            font-size: clamp(1rem, 3vw, 2rem);
            pointer-events: none;
            z-index: 10;
            opacity: 0;
        }

        /* Tablet+ */
        @media (min-width: 640px) {
            body {
                padding: 1.5rem;
            }

            .video-container::before {
                inset: -4px;
                padding: 4px;
            }
        }

        /* Desktop */
        @media (min-width: 1024px) {
            body {
                padding: 2rem;
            }

            .video-container::before {
                inset: -5px;
                padding: 5px;
            }
        }

        /* Landscape mobile */
        @media (max-height: 500px) and (orientation: landscape) {
            body {
                flex-direction: row;
                flex-wrap: wrap;
                gap: clamp(0.5rem, 2vw, 1rem);
                justify-content: center;
                align-content: center;
            }

            .title-wrapper {
                writing-mode: vertical-rl;
                text-orientation: mixed;
            }

            h1 {
                font-size: clamp(1.25rem, 4vh, 2rem);
            }

            .flags {
                flex-direction: column;
                margin-top: 0;
                margin-left: 0.5rem;
            }

            .video-wrapper {
                max-height: calc(100dvh - 3rem);
                max-width: calc(100vw - clamp(8rem, 25vw, 14rem));
            }

            video {
                max-height: calc(100dvh - 3rem);
            }

            footer {
                position: absolute;
                bottom: 0.5rem;
                left: 50%;
                transform: translateX(-50%);
                width: 100%;
                font-size: 0.65rem;
                padding: 0.3rem;
            }
        }

        /* Reduced motion */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
            }
        }
    </style>
</head>
<body>
    <canvas id="bgCanvas"></canvas>
    <div class="glass-overlay"></div>

    <div class="title-wrapper">
        <h1>safonov.gay</h1>
        <div class="flags">
            <span class="flag">üè≥Ô∏è‚Äçüåà</span>
            <span class="flag music-toggle" id="musicToggle" title="–ù–∞–∂–º–∏ —á—Ç–æ–±—ã –≤–∫–ª/–≤—ã–∫–ª –º—É–∑—ã–∫—É">‚ú®</span>
            <span class="flag">üè≥Ô∏è‚Äçüåà</span>
        </div>
    </div>
    
    <div class="video-wrapper">
        <div class="video-container">
            <video id="videoPlayer" loop muted autoplay playsinline></video>
        </div>
    </div>

    <footer>
        –î–∞–Ω–Ω—ã–π —Å–∞–π—Ç –Ω–æ—Å–∏—Ç —é–º–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä.<br>
        –°–ø–æ–Ω—Å–æ—Ä–æ–º —è–≤–ª—è–µ—Ç—Å—è <a href="https://t.me/kimmQA" target="_blank" rel="noopener">–≠–¥—É–∞—Ä–¥</a> üè≥Ô∏è‚Äçüåà
    </footer>

    <audio id="bgMusic" loop></audio>

    <script>
        // ====== –£–ö–ê–ñ–ò –ü–£–¢–ò –ó–î–ï–°–¨ ======
        const VIDEO_PATH = './safonov.mp4';
        const MUSIC_PATH = './madagaskar.mp3';
        // ==============================

        // Video setup
        const video = document.getElementById('videoPlayer');
        video.src = VIDEO_PATH;
        video.addEventListener('ended', () => video.play());

        // Music setup
        const music = document.getElementById('bgMusic');
        music.src = MUSIC_PATH;
        music.volume = 0.5;

        const musicToggle = document.getElementById('musicToggle');
        let musicPlaying = false;

        // Autoplay music on first interaction
        function startMusic() {
            if (!musicPlaying) {
                music.play().then(() => {
                    musicPlaying = true;
                }).catch(() => {});
            }
            document.removeEventListener('click', startMusic);
            document.removeEventListener('touchstart', startMusic);
        }

        document.addEventListener('click', startMusic);
        document.addEventListener('touchstart', startMusic);

        // Toggle music with star emoji
        musicToggle.addEventListener('click', (e) => {
            e.stopPropagation();
            if (music.paused) {
                music.play();
                musicToggle.classList.remove('paused');
                musicPlaying = true;
            } else {
                music.pause();
                musicToggle.classList.add('paused');
            }
        });

        // Pride colors
        const prideColors = [
            { r: 255, g: 0, b: 24 },
            { r: 255, g: 165, b: 44 },
            { r: 255, g: 255, b: 65 },
            { r: 0, g: 128, b: 24 },
            { r: 0, g: 0, b: 249 },
            { r: 134, g: 0, b: 125 }
        ];

        // Canvas animated background
        const canvas = document.getElementById('bgCanvas');
        const ctx = canvas.getContext('2d');
        let width, height;
        let blobs = [];

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }

        class Blob {
            constructor(color) {
                this.x = Math.random() * width;
                this.y = Math.random() * height;
                this.radius = Math.random() * 200 + 100;
                this.color = color;
                this.vx = (Math.random() - 0.5) * 0.5;
                this.vy = (Math.random() - 0.5) * 0.5;
                this.oscillation = Math.random() * Math.PI * 2;
            }

            update() {
                this.oscillation += 0.01;
                this.x += this.vx + Math.sin(this.oscillation) * 0.3;
                this.y += this.vy + Math.cos(this.oscillation) * 0.3;

                if (this.x < -this.radius) this.x = width + this.radius;
                if (this.x > width + this.radius) this.x = -this.radius;
                if (this.y < -this.radius) this.y = height + this.radius;
                if (this.y > height + this.radius) this.y = -this.radius;
            }

            draw() {
                const gradient = ctx.createRadialGradient(
                    this.x, this.y, 0,
                    this.x, this.y, this.radius
                );
                gradient.addColorStop(0, `rgba(${this.color.r}, ${this.color.g}, ${this.color.b}, 0.8)`);
                gradient.addColorStop(1, `rgba(${this.color.r}, ${this.color.g}, ${this.color.b}, 0)`);
                
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = gradient;
                ctx.fill();
            }
        }

        function initBlobs() {
            blobs = [];
            const count = width < 640 ? 6 : 10;
            for (let i = 0; i < count; i++) {
                blobs.push(new Blob(prideColors[i % prideColors.length]));
            }
        }

        function animate() {
            ctx.fillStyle = 'rgba(15, 15, 25, 1)';
            ctx.fillRect(0, 0, width, height);

            blobs.forEach(blob => {
                blob.update();
                blob.draw();
            });

            requestAnimationFrame(animate);
        }

        resize();
        initBlobs();
        animate();

        window.addEventListener('resize', () => {
            resize();
            initBlobs();
        });

        // GSAP animations
        gsap.from('.title-wrapper', {
            y: -50,
            opacity: 0,
            duration: 1,
            ease: 'power3.out'
        });

        gsap.from('.video-container', {
            scale: 0.9,
            opacity: 0,
            duration: 1,
            delay: 0.3,
            ease: 'power3.out'
        });

        gsap.from('footer', {
            y: 30,
            opacity: 0,
            duration: 1,
            delay: 0.5,
            ease: 'power3.out'
        });

        gsap.to('.flag:not(.music-toggle)', {
            y: -8,
            duration: 0.6,
            ease: 'power1.inOut',
            yoyo: true,
            repeat: -1,
            stagger: 0.1
        });

        gsap.to('.music-toggle', {
            rotate: 360,
            duration: 3,
            ease: 'none',
            repeat: -1
        });

        // Floating emojis
        const emojis = ['üçÜ', 'üëÖ', 'üí¶'];
        
        function createFloatingEmoji() {
            const emoji = document.createElement('div');
            emoji.className = 'emoji-float';
            emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
            emoji.style.left = Math.random() * 100 + '%';
            emoji.style.top = '100%';
            document.body.appendChild(emoji);

            gsap.to(emoji, {
                y: -window.innerHeight - 100,
                x: (Math.random() - 0.5) * 200,
                opacity: 0.8,
                duration: 4 + Math.random() * 3,
                ease: 'none',
                onComplete: () => emoji.remove()
            });

            gsap.to(emoji, {
                opacity: 0,
                delay: 3 + Math.random() * 2,
                duration: 1
            });
        }

        setInterval(createFloatingEmoji, 800);
    </script>
</body>
</html>
